{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Cart - Rondhonshoili</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
 <link rel="stylesheet" href="{% static 'css/homepage.css'%}">
   
  
  <style>
    /* your existing styles */
    :root {
      --rb: #9bd1ba;
      --w: #224d4d;
      --k: #f69330;
      --brigh: #eddb56;
      --bright: #fdf6bc;
      --light-color: #4baa81;
    }
    body {
      font-family: 'Times New Roman', Times, serif;
      background: var(--rb);
      padding: 4rem;
      margin: 0;
      color: var(--w);
      font-size: medium;
    }
    h1 {
      text-align: center;
      margin-bottom: 2rem;
      
    }
    .cart-container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 30px;
    }
    .cart-item {
      background: antiquewhite;
      border: 4px solid #be733acc;
      border-radius: 20px;
      width: 300px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .cart-item img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 12px;
    }
    .product-name {
      font-size: 1.8rem;
      margin-top: 1rem;
    }
    .price {
      font-size: 1.6rem;
      color: var(--k);
    }
    .quantity-controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin: 1rem 0;
    }
    .quantity-controls button {
      padding: 6px 12px;
      font-size: 1.5rem;
      background: var(--light-color);
      color: var(--bright);
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }
    .confirm-btn, .cancel-btn {
      margin-top: 2rem;
      font-size: 1.6rem;
      padding: 12px 30px;
      background: var(--light-color);
      color: var(--bright);
      border: none;
      border-radius: 30px;
      cursor: pointer;
      margin-right: 15px;
    }
    .confirm-btn:hover, .cancel-btn:hover {
      background-color: var(--k);
    }
    .total {
      text-align: center;
      font-size: 2rem;
      margin-top: 2rem;
      color: var(--w);
    }
    .buttons {
      text-align: center;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  

<header class="main-header">
  <div class="header-container">

    <!-- Logo -->
    <a href="{% url 'homepage' %}" class="logo">Rondhonshoili</a>

    <!-- Navbar -->
    <div class="navbar-container">
      <nav class="navbar">
        <a href="{% url 'homepage' %}">Home</a>
         <a href="{% url 'About_us' %}">About</a>
        <div class="dropdown">
          <button class="dropbtn">Categories </button>
          <div class="dropdown-content">
            
            <a href="{% url 'traditional' %}">Traditional</a>
<a href="{% url 'snack' %}">Snacks & Sweets</a>
<a href="{% url 'drinks' %}">Drinks</a>
<a href="{% url 'popular' %}">Popular</a>
 </div>
        </div>
      
        <a href="{% url 'shop' %}">shop</a>
       <div class="dropdown">
  <button class="dropbtn">Cooking class</button>
  <div class="dropdown-content">
    <a href="{% url 'class_updates' %}#free-class">Online Free Class</a>
    <a href="{% url 'class_updates' %}#paid-class" onclick="setTimeout(() => flipCard(), 200);">Online Paid Class</a>
  </div>
</div>
 <a href="{% url 'reviews' %}">Reviews</a>
        <a href="{% url 'contact' %}">Contact</a>
  </nav>
    </div>

    <!-- Icons -->
    <div class="icons">
      <a href="{% url 'recipe' %}" title="Search"><i class="fas fa-search"></i></a>
      <a href="{% url 'saved_recipes' %}" title="Wishlist"><i class="fas fa-heart"></i></a>
     <a href="{% url 'cart' %}"><i class="fas fa-shopping-cart"></i></a>

        {% if user.is_authenticated %}
                <a href="{% url 'profile' %}" class="fas fa-user" title="profile"></a>
            {% else %}
                <a href="{% url 'login' %}" class="fas fa-user" title="Log_in"></a>
            {% endif %}
         </div>

  </div>
</header>

<br><br><br><br>

{% if user.is_authenticated %}
  <h1>Your Cart</h1>

  {% if cart_items %}
    <div class="cart-container">
      {% for item in cart_items %}
        <div class="cart-item">
          <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" />
          <div class="product-name">{{ item.product.name }}</div>
          <div class="price">৳{{ item.product.price }}</div>

          <form method="post" action="{% url 'update_cart' item.id %}">
            {% csrf_token %}
            <div class="quantity-controls">
              <button type="submit" name="action" value="decrease">−</button>
              <span>{{ item.quantity }}</span>
              <button type="submit" name="action" value="increase">+</button>
            </div>
          </form>
        </div>
      {% endfor %}
    </div>

    <div class="total">Total: ৳{{ total_amount }}</div>

    <div class="buttons">
      <form method="post" action="{% url 'cancel_order' %}" style="display: inline;">
        {% csrf_token %}
        <button type="submit" class="cancel-btn">Cancel Order</button>
      </form>

      <form method="post" action="{% url 'payment' %}" style="display: inline;">
        {% csrf_token %}
        <button type="submit" class="confirm-btn">Confirm Order</button>
      </form>
    </div>

  {% else %}
    <div style="text-align:center; font-size: 2rem; margin-top: 19rem;">
      Your cart is empty.
    </div>
  {% endif %}

{% else %}
  <div style="text-align:center; margin-top: 5rem;">
    <a href="{% url 'login' %}" class="confirm-btn">Login to View Cart</a>
  </div>
{% endif %}

</body>
</html>
